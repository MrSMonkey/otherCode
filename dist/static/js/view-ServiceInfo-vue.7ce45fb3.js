(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-ServiceInfo-vue","view-components-service-BuyModal-vue"],{"0a35":function(e,t,a){"use strict";var n=a("d06f"),i=a.n(n);i.a},1593:function(e,t,a){"use strict";var n=a("eadf"),i=a.n(n);i.a},"3a1e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAftJREFUSA3tlr9LAzEUx3t3nUTBxULRRTja/8HJTg7q6B9QcBEXdfZfqC4OFUR3/wLBof4Rgj24yR8dWgpSpDp4V78PLkeuzbtL0kEEAyHJy8v7JPe+SVsq/Zff+gKDwWCp2+3ehmHoz7uHIAhOUA9VcVzZSNDhcHgH214URQ/zwAE8nkwmLdQLFdwR4F6vtzAaje4x3hA2x3HePM/b9H0/FDadNoGeyb6u6x7UarW2sKUnrlarXzAGYoJa7HbV9OQqKEKNAc7ETk+cgFwsvEK/SWNRdE/OQcvl8g6+WkfEozYDJgNOaQU3gSrBNnBTKAs2gdtAc8E6cAhvF6nJqBfrxqqcUjy5zORYnqQ+l3Oo9D2O4+Upfy0orSkEkxMHpzmpaENpjRaYHPPguG6feGi2p68MreNK+oBwDsKO4DHqoxjLLewfGL/ItqK+NjhRb0sVELlegdA6Jm+7Fpi5Mt/yJpCKNRN4IZiBkpC2AL6xheeKC7/LRwh8LgdHP1UvJzjk/BVia+T9qrHgIqjYjC1cCdaFzgOfAZtCbeEZsC3UBp6qut/vLyIAiUkuqZBkI9enR6Zer+9jXqX2prwuBVcqFXp9GqjPiYMRVARl4Jf4v3UqfJQtPvc67u4TXiHahHUhtSPWNWob/UxK2aBw9NhJgwmCa0MN4v5N1x/OgX06mHWVaAAAAABJRU5ErkJggg=="},"3bab":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[e.bugVisible?a("section",[a("div",{staticClass:"buy-dialog"},[a("div",{staticClass:"el-input"},[a("van-field",{attrs:{required:"",clearable:"",label:"联系人","input-align":"right",placeholder:"请输入联系人姓名",type:"text"},model:{value:e.ownerName,callback:function(t){e.ownerName=t},expression:"ownerName"}}),a("van-field",{attrs:{required:"",clearable:"","input-align":"right",label:"联系电话",placeholder:"请输入联系人电话",type:"number"},model:{value:e.ownerPhone,callback:function(t){e.ownerPhone=t},expression:"ownerPhone"}}),a("van-field",{attrs:{clearable:"","input-align":"right",label:"推荐人电话",placeholder:"请输入推荐人电话",type:"number"},model:{value:e.introducePhone,callback:function(t){e.introducePhone=t},expression:"introducePhone"}}),a("div",{staticClass:"dec"},[a("p",[e._v("备  注")]),a("van-field",{staticClass:"textarea",attrs:{"input-align":"left",placeholder:"请输入20字以内的备注",type:"textarea",maxlength:"20"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],1),a("confirmBtn",{attrs:{loadingText:"购买中",cancelText:"取消",loading:e.loading,isActive:!e.isActive},on:{confirm:e.clickBuy,plotCancel:e.plotCancel}},[a("template",{slot:"confirm"},[a("span",[e._v("购买应付"),a("span",{staticClass:"plot-price"},[e._v("¥"+e._s(parseFloat(e.data.price).toFixed(2)))])])])],2)],1)]):a("section",{staticClass:"service-info"},[a("h2",{staticClass:"serviceinfo-title"},[e._v(e._s(e.data.serviceName||"无"))]),a("div",{staticClass:"block"},[a("span",[e._v("产品单价：")]),a("p",[e._v(e._s(e.data&&parseFloat(e.data.price).toFixed(2)||"0.00")+"元")])]),a("div",{staticClass:"block"},[a("span",[e._v("服务产品：")]),e._l(e.data.productInfosBeans,function(t,n){return a("p",{key:n},[e._v(e._s(t.childProductName||"无"))])})],2),a("div",{staticClass:"block"},[a("span",[e._v("咨询电话：")]),a("p",[e._v(e._s(e.data.phone||"无"))])]),a("div",{staticClass:"block"},[a("span",[e._v("产品描述：")]),a("p",[e._v(e._s(e.data.desc||"无"))])]),e._m(0),a("div",{staticClass:"imgbox"},[a("ImagePreview",{attrs:{imgagesArr:e.data.imgUrls}})],1),a("div",{staticClass:"service-footer"},[a("van-button",{staticClass:"service-btn",attrs:{slot:"button",size:"large",type:"default"},on:{click:e.buy},slot:"button"},[e._v("购买")])],1)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("span",[e._v("产品图片：")]),a("p",[e._v(" ")])])}],r=(a("b5aa"),a("4457")),o=a("a585"),c=a("26cb"),s=a("fd86"),l=a("3d0b"),u=a("d26d"),d=a("3a61"),p=a("b2e6"),v=a("3b3c"),h=a("ccfe"),f=a("aec4"),b=a("73cd"),m=a("947d"),g=a("73ec"),y=a("6a6f"),k=a("79f6"),A="global",w=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(s["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.entrustId="",e.serviceId="",e.data={},e.ownerName="",e.ownerPhone="",e.remark="",e.bugVisible=!1,e.loading=!1,e.showDialog=!1,e.isphoneErr=!1,e.isintroducePhoneErr=!1,e.introducePhone="",e.tips="本次支付仅支付设计费用，装修费用需在确认装修改后支付！",e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"handlerPhone",value:function(e){e&&/^1[345789]\d{9}$/.test(e)?this.isphoneErr=!0:this.isphoneErr=!1}},{key:"handlerIntroducePhone",value:function(e){e&&/^1[345789]\d{9}$/.test(e)?this.isintroducePhoneErr=!0:this.isintroducePhoneErr=!1}},{key:"mounted",value:function(){this.entrustId=String(this.$route.query.entrustId),this.serviceId=String(this.$route.query.serviceId),this.getServiceDetils(this.serviceId),this.getUserInfo()}},{key:"getServiceDetils",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$toast.loading({duration:0,mask:!0,loadingType:"spinner",message:"加载中..."}),e.prev=1,e.next=4,this.axios.get(k["a"].getServiceDetils+"/".concat(t));case 4:a=e.sent,a&&"000"===a.code?this.data=a.data||[]:this.$toast("获取服务包详情失败"),e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](1),new Error(e.t0||"Unknow Error!");case 11:return e.prev=11,this.$toast.clear(),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[1,8,11,14]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getOrderStatusName",value:function(e){return y["j"][e]}},{key:"cancel",value:function(){this.bugVisible=!1}},{key:"buy",value:function(){this.bugVisible=!0,this.ownerName=this.userInfo.realName,this.ownerPhone=this.userInfo.username}},{key:"clickBuy",value:function(){return this.ownerName?this.ownerPhone?/^1[345789]\d{9}$/.test(this.ownerPhone)?void this.submitData(this.ownerName,this.ownerPhone):(this.$toast("请输入正确的联系人电话"),!1):(this.$toast("请输入联系人电话"),!1):(this.$toast("请输入联系人姓名"),!1)}},{key:"submitData",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={entrustId:this.entrustId,ownerName:t,ownerPhone:a,productId:this.serviceId,price:this.data.price,title:this.data.serviceName,remark:this.remark,introducePhone:this.introducePhone},this.loading=!0,e.prev=2,e.next=5,this.axios.post(k["a"].buyService,n);case 5:i=e.sent,i&&"000"===i.code?(r={orderId:i.data.orderId,productURL:"".concat(Object(g["d"])(),"serviceDetile?entrustId=").concat(this.entrustId,"&orderId=").concat(i.data.orderId)},this.payment(r)):this.$toast("购买失败，请重试"),e.next=12;break;case 9:throw e.prev=9,e.t0=e["catch"](2),new Error(e.t0||"Unknow Error!");case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,this,[[2,9,12,15]])}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"plotCancel",value:function(){this.bugVisible=!1}},{key:"isActive",get:function(){return!this.ownerName||!this.isphoneErr||!!this.introducePhone&&!this.isintroducePhoneErr}}]),t}(h["a"]);d["a"]([Object(v["b"])("getUserInfo",{namespace:A})],w.prototype,"userInfo",void 0),d["a"]([Object(v["a"])("getUserInfo",{namespace:A})],w.prototype,"getUserInfo",void 0),d["a"]([Object(v["a"])("payment",{namespace:A})],w.prototype,"payment",void 0),d["a"]([Object(p["e"])("ownerPhone")],w.prototype,"handlerPhone",null),d["a"]([Object(p["e"])("introducePhone")],w.prototype,"handlerIntroducePhone",null),w=d["a"]([Object(p["a"])({name:"ServiceInfo",components:{ImagePreview:f["default"],BuyModal:b["default"],ConfirmBtn:m["a"]}})],w);var j=w,O=j,x=(a("aed8"),a("8c9c")),C=Object(x["a"])(O,n,i,!1,null,null,null);t["default"]=C.exports},"73cd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-popup",{attrs:{position:"bottom"},on:{"click-overlay":e.cancel},model:{value:e.buyShow,callback:function(t){e.buyShow=t},expression:"buyShow"}},[n("div",{staticClass:"buy-dialog"},[n("div",{staticClass:"title"},[n("div",{staticClass:"left",on:{click:e.cancel}},[n("img",{attrs:{src:a("3a1e"),alt:""}})]),n("div",{staticClass:"content"},[e._v("\n        购买信息\n      ")]),n("div",{staticClass:"right"},[n("span",[e._v("购买")])])]),n("div",[n("van-field",{attrs:{required:"",clearable:"",label:"联系人*","input-align":"right",placeholder:"请输入联系人姓名",type:"number"}}),n("van-field",{attrs:{required:"",clearable:"","input-align":"right",label:"联系电话*",placeholder:"请输入联系人电话",type:"number"}}),n("div",[n("p",[e._v("备注")]),n("van-field",{attrs:{clearable:"","input-align":"left",placeholder:"请输入20字以内的备注",type:"textarea"}})],1)],1)])])},i=[],r=a("a585"),o=a("26cb"),c=a("fd86"),s=a("3d0b"),l=a("d26d"),u=a("3a61"),d=a("b2e6"),p=a("ccfe"),v=function(e){function t(){return Object(r["a"])(this,t),Object(c["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(o["a"])(t,[{key:"confirm",value:function(){this.$emit("confirmEvent")}},{key:"cancel",value:function(){this.$emit("cancelEvent")}}]),t}(p["a"]);u["a"]([Object(d["c"])({type:Boolean,default:!1})],v.prototype,"buyShow",void 0),v=u["a"]([Object(d["a"])({name:"BuyModal"})],v);var h=v,f=h,b=(a("0a35"),a("8c9c")),m=Object(b["a"])(f,n,i,!1,null,null,null);t["default"]=m.exports},"8b7b":function(e,t,a){},"947d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"plot-footer"},[a("van-button",{attrs:{size:"normal",type:"default"},on:{click:e.plotCancel}},[e._v(e._s(e.cancelText))]),e.isActiveKey?a("van-button",{staticClass:"plot-active",attrs:{size:"normal",type:"default",loading:e.loading,"loading-text":e.loadingText},on:{click:e.confirm}},[e._t("confirm")],2):a("van-button",{attrs:{size:"normal",type:"default",url:e.url}},[e._t("confirm")],2)],1)},i=[],r=a("a585"),o=a("26cb"),c=a("fd86"),s=a("3d0b"),l=a("d26d"),u=a("3a61"),d=a("b2e6"),p=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(c["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.isActiveKey=!1,e}return Object(l["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){this.isActiveKey=this.isActive}},{key:"confirm",value:function(){}},{key:"plotCancel",value:function(){}},{key:"handlerisActive",value:function(e){this.isActiveKey=e}}]),t}(d["d"]);u["a"]([Object(d["c"])({type:Boolean,default:!1})],p.prototype,"loading",void 0),u["a"]([Object(d["c"])({type:Boolean,default:!1})],p.prototype,"isActive",void 0),u["a"]([Object(d["c"])({type:String,default:""})],p.prototype,"url",void 0),u["a"]([Object(d["c"])({type:String,default:"加载中"})],p.prototype,"loadingText",void 0),u["a"]([Object(d["c"])({type:String,default:"取消"})],p.prototype,"cancelText",void 0),u["a"]([Object(d["c"])({type:String,default:"确认"})],p.prototype,"confirmText",void 0),u["a"]([Object(d["b"])("confirm")],p.prototype,"confirm",null),u["a"]([Object(d["b"])("plotCancel")],p.prototype,"plotCancel",null),u["a"]([Object(d["e"])("isActive")],p.prototype,"handlerisActive",null),p=u["a"]([Object(d["a"])({name:"ConfirmBtn"})],p);var v=p,h=v,f=(a("1593"),a("8c9c")),b=Object(f["a"])(h,n,i,!1,null,null,null);t["a"]=b.exports},aed8:function(e,t,a){"use strict";var n=a("8b7b"),i=a.n(n);i.a},d06f:function(e,t,a){},eadf:function(e,t,a){}}]);
//# sourceMappingURL=view-ServiceInfo-vue.7ce45fb3.js.map