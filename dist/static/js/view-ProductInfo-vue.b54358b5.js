(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-ProductInfo-vue","view-components-service-BuyModal-vue"],{"0a35":function(t,e,a){"use strict";var n=a("d06f"),i=a.n(n);i.a},1593:function(t,e,a){"use strict";var n=a("eadf"),i=a.n(n);i.a},"2e27":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[t.bugVisible?a("section",[a("div",{staticClass:"buy-dialog"},["118062916141300008"===t.data.productId||"118062916145800009"===t.data.productId||"118062916141300008"===t.data.cId||"118062916145800009"===t.data.cId?a("div",{staticClass:"tips"},[a("p",[t._v("注："+t._s(t.tips))])]):9===t.data.tpyeId?a("div",{staticClass:"tips"},[a("p",[t._v("注："+t._s(t.tipsTwo))])]):t._e(),a("div",{staticClass:"el-input"},[a("van-field",{attrs:{required:"",clearable:"",label:"联系人","input-align":"right",placeholder:"请输入联系人姓名",type:"text"},model:{value:t.buyersName,callback:function(e){t.buyersName=e},expression:"buyersName"}}),a("van-field",{attrs:{required:"",clearable:"","input-align":"right",label:"联系电话",placeholder:"请输入联系人电话",type:"number"},model:{value:t.buyersPhone,callback:function(e){t.buyersPhone=e},expression:"buyersPhone"}}),a("van-field",{attrs:{clearable:"","input-align":"right",label:"推荐人电话",placeholder:"请输入推荐人电话",type:"number"},model:{value:t.introducePhone,callback:function(e){t.introducePhone=e},expression:"introducePhone"}}),a("div",{staticClass:"dec"},[a("p",[t._v("备  注")]),a("van-field",{staticClass:"textarea",attrs:{"input-align":"left",placeholder:"请输入20字以内的备注",type:"textarea",maxlength:"20"},model:{value:t.buyersRemarks,callback:function(e){t.buyersRemarks=e},expression:"buyersRemarks"}})],1)],1),a("confirmBtn",{attrs:{loadingText:"购买中",cancelText:"取消",loading:t.loading,isActive:!t.isActive},on:{confirm:t.clickBuy,plotCancel:t.plotCancel}},[a("template",{slot:"confirm"},[a("span",[t._v("购买应付"),a("span",{staticClass:"plot-price"},[t._v("¥"+t._s(parseFloat(t.data.price).toFixed(2)))])])])],2)],1)]):a("section",{staticClass:"service-info"},[a("h2",{staticClass:"serviceinfo-title"},[t._v(t._s(t.data.productName||"无"))]),a("div",{staticClass:"block"},[a("span",[t._v("产品单价：")]),a("p",[t._v(t._s(t.data&&parseFloat(t.data.price).toFixed(2)||"0.00")+"元"+t._s(t.data.unit))])]),a("div",{staticClass:"block"},[a("span",[t._v("产品类型：")]),a("p",[t._v(t._s(t.data.typeName||"无"))])]),a("div",{staticClass:"block"},[a("span",[t._v("服务总次数：")]),a("p",[t._v(t._s(t.data.serviceCount))])]),a("div",{staticClass:"block"},[a("span",[t._v("产品描述：")]),a("p",[t._v(t._s(t.data.description||"无"))])]),t._m(0),a("div",{staticClass:"imgbox"},[a("ImagePreview",{attrs:{imgagesArr:t.data.productImgs}})],1),a("div",{staticClass:"service-footer"},[a("van-button",{staticClass:"service-btn",attrs:{slot:"button",size:"large",type:"default"},on:{click:t.buy},slot:"button"},[t._v("购买")])],1)])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[a("span",[t._v("产品图片：")]),a("p",[t._v(" ")])])}],s=(a("b5aa"),a("4457")),r=a("a585"),o=a("26cb"),c=a("fd86"),u=a("3d0b"),l=a("d26d"),d=a("3a61"),p=a("b2e6"),h=a("3b3c"),b=a("ccfe"),v=a("aec4"),f=a("73cd"),y=a("947d"),m=a("73ec"),g=a("6a6f"),k=a("79f6"),A="global",j=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.entrustId="",t.productId="",t.data={},t.buyersName="",t.buyersPhone="",t.buyersRemarks="",t.bugVisible=!1,t.loading=!1,t.showDialog=!1,t.isphoneErr=!1,t.isintroducePhoneErr=!1,t.introducePhone="",t.tips=g["m"],t.tipsTwo=g["n"],t}return Object(l["a"])(e,t),Object(o["a"])(e,[{key:"handlerPhone",value:function(t){t&&/^1[345789]\d{9}$/.test(t)?this.isphoneErr=!0:this.isphoneErr=!1}},{key:"handlerIntroducePhone",value:function(t){t&&/^1[345789]\d{9}$/.test(t)?this.isintroducePhoneErr=!0:this.isintroducePhoneErr=!1}},{key:"mounted",value:function(){this.entrustId=String(this.$route.query.entrustId),this.productId=String(this.$route.query.productId),this.getProductDetail(this.productId),this.getUserInfo()}},{key:"getProductDetail",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({duration:0,mask:!0,loadingType:"spinner",message:"加载中..."}),t.prev=1,t.next=4,this.axios.get(k["a"].getProductDetail+"/".concat(e));case 4:a=t.sent,a&&"000"===a.code?this.data=a.data||{}:this.$toast("获取服务产品详情失败"),t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](1),new Error(t.t0||"Unknow Error!");case 11:return t.prev=11,this.$toast.clear(),t.finish(11);case 14:case"end":return t.stop()}},t,this,[[1,8,11,14]])}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getOrderStatusName",value:function(t){return g["j"][t]}},{key:"cancel",value:function(){this.bugVisible=!1}},{key:"buy",value:function(){this.bugVisible=!0,this.buyersName=this.userInfo.realName,this.buyersPhone=this.userInfo.username}},{key:"clickBuy",value:function(){return this.buyersName?this.buyersPhone?/^1[345789]\d{9}$/.test(this.buyersPhone)?void this.submitData(this.buyersName,this.buyersPhone):(this.$toast("请输入正确的联系人电话"),!1):(this.$toast("请输入联系人电话"),!1):(this.$toast("请输入联系人姓名"),!1)}},{key:"submitData",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,a){var n,i,s,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n={entrustId:this.entrustId,buyersName:e,buyersPhone:a,productId:this.productId,productName:this.data.productName,buyersRemarks:this.buyersRemarks,introducePhone:this.introducePhone},this.loading=!0,t.prev=2,t.next=5,this.axios.post(k["a"].buyProduct,n);case 5:i=t.sent,i&&"000"===i.code?4===this.data.typeId?(this.$toast.success("购买成功"),setTimeout(function(){r.bugVisible=!1,r.$router.push("/productDetile?entrustId=".concat(r.entrustId,"&orderId=").concat(i.data,"&status=1"))},2e3)):(s={orderId:i.data,productURL:"".concat(Object(m["d"])(),"productDetile?entrustId=").concat(this.entrustId,"&orderId=").concat(i.data,"&status=1")},this.payment(s)):this.$toast(i.msg||"购买失败，请重试"),t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](2),new Error(t.t0||"Unknow Error!");case 12:return t.prev=12,this.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,this,[[2,9,12,15]])}));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"plotCancel",value:function(){this.bugVisible=!1}},{key:"isActive",get:function(){return!this.buyersName||!this.isphoneErr||!!this.introducePhone&&!this.isintroducePhoneErr}}]),e}(b["a"]);d["a"]([Object(h["b"])("getUserInfo",{namespace:A})],j.prototype,"userInfo",void 0),d["a"]([Object(h["a"])("getUserInfo",{namespace:A})],j.prototype,"getUserInfo",void 0),d["a"]([Object(h["a"])("payment",{namespace:A})],j.prototype,"payment",void 0),d["a"]([Object(p["e"])("buyersPhone")],j.prototype,"handlerPhone",null),d["a"]([Object(p["e"])("introducePhone")],j.prototype,"handlerIntroducePhone",null),j=d["a"]([Object(p["a"])({name:"ProductInfo",components:{ImagePreview:v["default"],BuyModal:f["default"],ConfirmBtn:y["a"]}})],j);var O=j,C=O,I=(a("da8e"),a("8c9c")),x=Object(I["a"])(C,n,i,!1,null,"5f683be4",null);e["default"]=x.exports},"3a1e":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAftJREFUSA3tlr9LAzEUx3t3nUTBxULRRTja/8HJTg7q6B9QcBEXdfZfqC4OFUR3/wLBof4Rgj24yR8dWgpSpDp4V78PLkeuzbtL0kEEAyHJy8v7JPe+SVsq/Zff+gKDwWCp2+3ehmHoz7uHIAhOUA9VcVzZSNDhcHgH214URQ/zwAE8nkwmLdQLFdwR4F6vtzAaje4x3hA2x3HePM/b9H0/FDadNoGeyb6u6x7UarW2sKUnrlarXzAGYoJa7HbV9OQqKEKNAc7ETk+cgFwsvEK/SWNRdE/OQcvl8g6+WkfEozYDJgNOaQU3gSrBNnBTKAs2gdtAc8E6cAhvF6nJqBfrxqqcUjy5zORYnqQ+l3Oo9D2O4+Upfy0orSkEkxMHpzmpaENpjRaYHPPguG6feGi2p68MreNK+oBwDsKO4DHqoxjLLewfGL/ItqK+NjhRb0sVELlegdA6Jm+7Fpi5Mt/yJpCKNRN4IZiBkpC2AL6xheeKC7/LRwh8LgdHP1UvJzjk/BVia+T9qrHgIqjYjC1cCdaFzgOfAZtCbeEZsC3UBp6qut/vLyIAiUkuqZBkI9enR6Zer+9jXqX2prwuBVcqFXp9GqjPiYMRVARl4Jf4v3UqfJQtPvc67u4TXiHahHUhtSPWNWob/UxK2aBw9NhJgwmCa0MN4v5N1x/OgX06mHWVaAAAAABJRU5ErkJggg=="},"3eaa":function(t,e,a){},"73cd":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-popup",{attrs:{position:"bottom"},on:{"click-overlay":t.cancel},model:{value:t.buyShow,callback:function(e){t.buyShow=e},expression:"buyShow"}},[n("div",{staticClass:"buy-dialog"},[n("div",{staticClass:"title"},[n("div",{staticClass:"left",on:{click:t.cancel}},[n("img",{attrs:{src:a("3a1e"),alt:""}})]),n("div",{staticClass:"content"},[t._v("\n        购买信息\n      ")]),n("div",{staticClass:"right"},[n("span",[t._v("购买")])])]),n("div",[n("van-field",{attrs:{required:"",clearable:"",label:"联系人*","input-align":"right",placeholder:"请输入联系人姓名",type:"number"}}),n("van-field",{attrs:{required:"",clearable:"","input-align":"right",label:"联系电话*",placeholder:"请输入联系人电话",type:"number"}}),n("div",[n("p",[t._v("备注")]),n("van-field",{attrs:{clearable:"","input-align":"left",placeholder:"请输入20字以内的备注",type:"textarea"}})],1)],1)])])},i=[],s=a("a585"),r=a("26cb"),o=a("fd86"),c=a("3d0b"),u=a("d26d"),l=a("3a61"),d=a("b2e6"),p=a("ccfe"),h=function(t){function e(){return Object(s["a"])(this,e),Object(o["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(r["a"])(e,[{key:"confirm",value:function(){this.$emit("confirmEvent")}},{key:"cancel",value:function(){this.$emit("cancelEvent")}}]),e}(p["a"]);l["a"]([Object(d["c"])({type:Boolean,default:!1})],h.prototype,"buyShow",void 0),h=l["a"]([Object(d["a"])({name:"BuyModal"})],h);var b=h,v=b,f=(a("0a35"),a("8c9c")),y=Object(f["a"])(v,n,i,!1,null,null,null);e["default"]=y.exports},"947d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"plot-footer"},[a("van-button",{attrs:{size:"normal",type:"default"},on:{click:t.plotCancel}},[t._v(t._s(t.cancelText))]),t.isActiveKey?a("van-button",{staticClass:"plot-active",attrs:{size:"normal",type:"default",loading:t.loading,"loading-text":t.loadingText},on:{click:t.confirm}},[t._t("confirm")],2):a("van-button",{attrs:{size:"normal",type:"default",url:t.url}},[t._t("confirm")],2)],1)},i=[],s=a("a585"),r=a("26cb"),o=a("fd86"),c=a("3d0b"),u=a("d26d"),l=a("3a61"),d=a("b2e6"),p=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(o["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.isActiveKey=!1,t}return Object(u["a"])(e,t),Object(r["a"])(e,[{key:"mounted",value:function(){this.isActiveKey=this.isActive}},{key:"confirm",value:function(){}},{key:"plotCancel",value:function(){}},{key:"handlerisActive",value:function(t){this.isActiveKey=t}}]),e}(d["d"]);l["a"]([Object(d["c"])({type:Boolean,default:!1})],p.prototype,"loading",void 0),l["a"]([Object(d["c"])({type:Boolean,default:!1})],p.prototype,"isActive",void 0),l["a"]([Object(d["c"])({type:String,default:""})],p.prototype,"url",void 0),l["a"]([Object(d["c"])({type:String,default:"加载中"})],p.prototype,"loadingText",void 0),l["a"]([Object(d["c"])({type:String,default:"取消"})],p.prototype,"cancelText",void 0),l["a"]([Object(d["c"])({type:String,default:"确认"})],p.prototype,"confirmText",void 0),l["a"]([Object(d["b"])("confirm")],p.prototype,"confirm",null),l["a"]([Object(d["b"])("plotCancel")],p.prototype,"plotCancel",null),l["a"]([Object(d["e"])("isActive")],p.prototype,"handlerisActive",null),p=l["a"]([Object(d["a"])({name:"ConfirmBtn"})],p);var h=p,b=h,v=(a("1593"),a("8c9c")),f=Object(v["a"])(b,n,i,!1,null,null,null);e["a"]=f.exports},d06f:function(t,e,a){},da8e:function(t,e,a){"use strict";var n=a("3eaa"),i=a.n(n);i.a},eadf:function(t,e,a){}}]);
//# sourceMappingURL=view-ProductInfo-vue.b54358b5.js.map