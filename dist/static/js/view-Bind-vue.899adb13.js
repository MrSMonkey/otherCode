(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-Bind-vue"],{"23a4":function(t,e,n){"use strict";var a=n("f308"),o=n.n(a);o.a},3778:function(t,e,n){"use strict";n.r(e);var a,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"login"},[n("h1",[t._v("登录")]),n("section",{staticClass:"el-input"},[t._m(0),n("div",{staticClass:"phone",staticStyle:{marginBottom:"20px"}},[n("van-field",{attrs:{placeholder:"请输入手机号",type:"text",clearable:""},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),n("p",{ref:"phoneErrorInfo",staticClass:"error-info"})],1),n("p",{staticClass:"tip"},[t._v("验证码")]),n("section",[n("section",{staticClass:"code-box"},[n("div",{staticClass:"code"},[n("van-field",{attrs:{type:"text",placeholder:"验证码",clearable:""},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),n("p",{ref:"codeErrorInfo",staticClass:"error-info"})],1),n("div",[t.isphoneErr?n("span",[t.isDisabledVerfiyCodeBtn?n("van-button",{staticClass:"btn",attrs:{slot:"button",size:"normal",type:"default"},slot:"button"},[t._v("重发("+t._s(t.time)+")")]):n("van-button",{staticClass:"btn active",attrs:{slot:"button",size:"normal",type:"default"},on:{click:t.getCode},slot:"button"},[t._v("获取验证码")])],1):n("van-button",{staticClass:"btn",attrs:{slot:"button",size:"normal",type:"default"},slot:"button"},[t._v("获取验证码")])],1)])]),t.isphoneErr&&t.isCodeErr?n("van-button",{staticClass:"login-btn-active",attrs:{slot:"button",size:"large",type:"default","loading-text":"登录中...",loading:t.loading},on:{click:t.submitLogin},slot:"button"},[t._v("登录")]):n("van-button",{staticClass:"login-btn",attrs:{slot:"button",size:"large",type:"default"},slot:"button"},[t._v("登录")])],1)])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"tip"},[t._v("手机号"),n("span",[t._v("(*新用户初次登录将自动注册)")])])}],r=n("5f19"),i=n("9289"),c=n.n(i),l=n("8da3"),u=n.n(l),d=n("f06e"),p=n.n(d),h=(n("3a23"),n("0949")),b=n.n(h),f=(n("b5aa"),n("4457")),v=n("a585"),m=n("26cb"),C=n("fd86"),g=n("3d0b"),k=n("d26d"),y=n("3a61"),w=n("b2e6"),E=n("3b3c"),_=n("ccfe"),j=n("73ec"),x=n("79f6"),O="global",$=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(C["a"])(this,Object(g["a"])(e).apply(this,arguments)),t.phone="",t.code="",t.isphoneErr=!1,t.isCodeErr=!1,t.loading=!1,t.time=60,t.isDisabledVerfiyCodeBtn=!1,t}return Object(k["a"])(e,t),Object(m["a"])(e,[{key:"getCode",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.axios.post(x["a"].getCode+"/".concat(this.phone));case 3:e=t.sent,e&&"000"===e.code?this.startCountdown():this.$toast("获取验证码失败"),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0||"Unknow Error!");case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"startCountdown",value:function(){var t=this;this.isDisabledVerfiyCodeBtn=!0;var e=setInterval(function(){t.time--,0===t.time&&(t.isDisabledVerfiyCodeBtn=!1,t.time=60,clearInterval(e))},1e3)}},{key:"submitLogin",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.axios.post(x["a"].login,{mobile:this.phone,verificationCode:this.code,registerSource:1});case 3:e=t.sent,this.loading=!0,e&&"000"===e.code?(j["b"].setLocalData("siteToken",e.data.access_token),j["b"].setLocalData("userId",e.data.userId),this.updateToken(e.data.access_token),this.$router.push("/house")):this.$toast(e.msg||"登录失败"),t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](0),new Error(t.t0||"Unknow Error!");case 11:return t.prev=11,this.loading=!1,t.finish(11);case 14:case"end":return t.stop()}},t,this,[[0,8,11,14]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"handlerPhone",value:function(t){t&&/^1[345789]\d{9}$/.test(t)?(this.$refs.phoneErrorInfo.innerHTML="",this.isphoneErr=!0):(this.isphoneErr=!1,this.$refs.phoneErrorInfo.innerHTML="请输入正确的手机号")}},{key:"handlerCode",value:function(t){t&&/^\d{6}$/.test(t)?(this.$refs.codeErrorInfo.innerHTML="",this.isCodeErr=!0):(this.isCodeErr=!1,this.$refs.codeErrorInfo.innerHTML="请输入6位手机验证码")}}]),e}(_["a"]);y["a"]([Object(E["c"])("updateToken",{namespace:O})],$.prototype,"updateToken",void 0),y["a"]([Object(w["e"])("phone")],$.prototype,"handlerPhone",null),y["a"]([Object(w["e"])("code")],$.prototype,"handlerCode",null),$=y["a"]([Object(w["a"])({name:"Bind",components:(a={},Object(r["a"])(a,b.a.name,b.a),Object(r["a"])(a,p.a.name,p.a),Object(r["a"])(a,u.a.name,u.a),Object(r["a"])(a,c.a.name,c.a),a)})],$);var I=$,L=I,T=(n("23a4"),n("8c9c")),B=Object(T["a"])(L,o,s,!1,null,null,null);e["default"]=B.exports},f308:function(t,e,n){}}]);
//# sourceMappingURL=view-Bind-vue.899adb13.js.map