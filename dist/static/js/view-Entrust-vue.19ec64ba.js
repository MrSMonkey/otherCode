(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-Entrust-vue"],{1593:function(t,e,a){"use strict";var i=a("eadf"),n=a.n(i);n.a},"2fe3":function(t,e,a){},"317f":function(t,e,a){"use strict";var i=a("2fe3"),n=a.n(i);n.a},"3d4e":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAAAAXNSR0IArs4c6QAAAulJREFUSA29lu9LU1EYx89z76ZOExv9sH8gDKJ6IxnOWQvRiDSwdiODJEryVT/pRZoG3WVYYOGLSEEEX0TciWWNEkIW7C7QRtGLIvOFvYma2A9B1xTd6Tkbd9y7nRuzXPfFPed8n+c8n/M855y7AfkPT9DrOUgJPV5cUNSwef+ZBYYUss1VFc+RGIkNUkrrv879HJ7y9+cxJmQTrA56GmmM9hFCxSQHyKgtr7gua2CENhNK72KmHAY84ojJtf11Rx2Uz2OmXSYBZkSBVK/6HgcVudUMCgTCgkV0lR9uf7OqGavea9cpJS28TBH62WoR95bVt3xkdkPGoVCPlTcpEw2ht82h5BMGdmpQA3hsqGNddGp6LOCVL2YC0nzY4VG98j2EntM0QwswmZMjVJZJbVN6PV7q10rHhghZHsVLvo0ZAUCucLe16x15faooYhAm+hDeyLOj9t4milWlh1q/pNqFceXmpnmy9EKDMgcM1IaH5A7/KiRCUL/fgtD7ZlDc07cFxLKHB2URIKDIzxC1LxEu5Q3QX0FLmkCSlvWWyafdueG5WQUXW6fXtT6W8RXNt9Y4D1z+oWmprSASOAVAPqQa4mNKT6hk4sE7RcnR7C+VLlt4fvaxGRT9gpY1a6v+BGWx4nscHLq1MbYcfY413q4BjC2MiKSgvojkit/JNx/adhvtiREG8xcW2Wp31Fya59n1WhzMhIDvhp1Elkaw7Dv1DlofqxIgFKyY6S5NM7aJxZVLF34Zdf4oCWZmdbizkCws+jB4Jd+dr+Kihu10i7RVkhb5HumqAczMoSc9+dHo9EM8rdXp7ukKXj3Fsb7iGLhcS+lWc8Xw5WJupbWnI3ZaUsuyMJ+WsCB0wEFLGlYKZbPTMtZg7J6qM+oAHrijmpbS9uJHphnhNEXPaGgKZrOx3AL+benFPT9piAak2+luP2vQVjhIK7V+PmYTc7ivNGFdupM6QOe/QpOxMungD0FH0CtfzcQ3E5/fe60LWUPjRd4AAAAASUVORK5CYII="},"6dce":function(t,e,a){"use strict";a.r(e);var i,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[t.showPlot?i("section",{staticClass:"plot"},[t.showPlot?i("section",{staticClass:"search"},[i("van-field",{attrs:{placeholder:"请输入您爱屋所在的小区",clearable:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1):t._e(),i("main",{staticClass:"main"},[t.tableList.length>0?i("ul",{staticClass:"list"},t._l(t.tableList,function(e){return i("li",{key:e.id,class:e.id===t.plotAacive?"active":"",on:{click:function(a){return t.selectPlot(e)}}},[i("span",[t._v(t._s(e.communityName)+"("+t._s(e.address)+")")]),e.id===t.plotAacive?i("img",{attrs:{src:a("3d4e"),alt:""}}):t._e()])}),0):t._e(),0===t.tableList.length&&t.isGetPlot?i("div",[t._m(0)]):t._e()]),i("confirmBtn",{attrs:{loadingText:"保存中",cancelText:"返回",isActive:t.tableList.length>0},on:{confirm:t.onOk,plotCancel:t.plotCancel}},[i("template",{slot:"confirm"},[i("span",[t._v("确认")])])],2)],1):i("section",{staticClass:"entrust"},[i("section",{staticClass:"area"},[i("div",{staticClass:"city"},[i("div",{staticClass:"label"},[t._v("城  市*")]),i("div",{staticClass:"village"},[i("van-field",{attrs:{placeholder:"请选择您爱屋所在城市",type:"text","right-icon":"arrow",readonly:""},on:{click:function(e){t.cityShow=!0},"click-right-icon":function(e){t.cityShow=!0}},model:{value:t.cityName,callback:function(e){t.cityName=e},expression:"cityName"}})],1)]),i("div",{staticClass:"city"},[i("div",{staticClass:"label"},[t._v("小  区*")]),i("div",{staticClass:"village"},[i("van-field",{attrs:{placeholder:"请选择您爱屋所在的小区",type:"text",readonly:"","right-icon":"arrow"},on:{"click-right-icon":t.toPlot,click:t.toPlot},model:{value:t.communityName,callback:function(e){t.communityName=e},expression:"communityName"}})],1)]),i("div",{staticClass:"fixture"},[i("div",{staticClass:"label"},[t._v("装修情况*")]),i("div",{staticClass:"check"},t._l(t.houseSetting,function(e,a){return i("span",{key:a,class:e.id===t.active?"active":"",on:{click:function(a){return t.selectItem(e.id)}}},[t._v(" "+t._s(e.name)+" ")])}),0)])]),i("section",{staticClass:"area"},[i("div",{staticClass:"city"},[i("div",{staticClass:"label"},[t._v("您的称呼*")]),i("div",{staticClass:"village"},[i("van-field",{attrs:{placeholder:"如何称呼您",type:"text",clearable:""},model:{value:t.ownerName,callback:function(e){t.ownerName=e},expression:"ownerName"}})],1)]),t.isLogin?t._e():i("div",{staticClass:"city"},[i("div",{staticClass:"label"},[t._v("联系方式*")]),i("div",{staticClass:"village"},[i("van-field",{attrs:{placeholder:"您的联系电话",type:"number",clearable:""},model:{value:t.ownerPhone,callback:function(e){t.ownerPhone=e},expression:"ownerPhone"}})],1)]),t.isLogin?t._e():i("div",{staticClass:"city"},[i("div",{staticClass:"label just"},[t._v("验证码*")]),i("div",{staticClass:"village"},[i("van-field",{attrs:{placeholder:"请输入验证码",type:"number",clearable:""},model:{value:t.varityCold,callback:function(e){t.varityCold=e},expression:"varityCold"}},[t.isphoneErr?t._e():i("van-button",{staticClass:"code-btn",attrs:{slot:"button",size:"small",type:"default"},slot:"button"},[t._v("获取验证码")]),t.isphoneErr&&t.isDisabledVerfiyCodeBtn?i("van-button",{staticClass:"code-btn",attrs:{slot:"button",size:"small",type:"default"},slot:"button"},[t._v("重发("+t._s(t.time)+")")]):t._e(),t.isphoneErr&&!t.isDisabledVerfiyCodeBtn?i("van-button",{staticClass:"code-btn btn-active",attrs:{slot:"button",size:"small",type:"default"},on:{click:t.getCode},slot:"button"},[t._v("获取验证码")]):t._e()],1)],1)])]),i("section",{staticClass:"step-guide"},[i("HrTitle",{attrs:{title:"爱屋发布流程"}}),i("div",{staticClass:"step-plant"},t._l(t.houstFlow,function(e,a){return i("div",{key:a},[i("div",{staticClass:"icon-box"},[i("img",{attrs:{src:e.img,alt:e.text}}),i("p",[t._v(t._s(e.text))])]),0!==a?i("div",{staticClass:"step-line"}):t._e()])}),0)],1),i("section",[(t.isLogin||t.isphoneErr)&&t.ownerName&&(t.isLogin||t.isCodeErr)&&t.communityName?i("van-button",{staticClass:"entrust-btn",attrs:{slot:"button",size:"large",type:"default",loading:t.loading,"loading-text":"提交中"},on:{click:t.getSubmitData},slot:"button"},[t._v("立即提交")]):i("van-button",{staticClass:"entrust-btn bg-active",attrs:{slot:"button",size:"large",type:"default"},slot:"button"},[t._v("立即提交")])],1)]),i("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.cityShow,callback:function(e){t.cityShow=e},expression:"cityShow"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:t.cityList,title:"选择城市"},on:{confirm:t.cityConfirm,cancel:function(e){t.cityShow=!1}}})],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"noserch"},[a("p",{staticClass:"noserch-title"},[t._v("未找到您输入的小区")]),a("p",{staticClass:"tips"},[t._v("快速咨询，请点击拨打：10105288")]),a("a",{attrs:{href:"tel:10105288"}},[t._v("快速委托")])])}],o=a("5f19"),c=a("9289"),r=a.n(c),l=a("8da3"),u=a.n(l),d=a("f06e"),h=a.n(d),v=(a("3a23"),a("0949")),p=a.n(v),m=a("34f3"),f=a("0ec6"),y=a.n(f),b=(a("b5aa"),a("4457")),g=a("a585"),C=a("26cb"),k=a("fd86"),w=a("3d0b"),x=a("d26d"),A=a("3a61"),O=a("b2e6"),j=a("3b3c"),E=a("ccfe"),_=a("add4"),I=a("947d"),L=a("73ec"),N=a("6a6f"),P=a("79f6"),S="global",D=function(t){function e(){var t;return Object(g["a"])(this,e),t=Object(k["a"])(this,Object(w["a"])(e).apply(this,arguments)),t.cityName="成都市",t.cityId="510100",t.code="",t.cityShow=!1,t.cityList=[],t.active=1,t.plotAacive=-1,t.houstFlow=N["c"],t.plot="",t.showPlot=!1,t.value="",t.loading=!1,t.finished=!1,t.isLogin=!1,t.tableList=[],t.communityId="",t.communityName="",t.selectData={},t.ownerName="",t.ownerPhone="",t.isphoneErr=!1,t.isDisabledVerfiyCodeBtn=!1,t.time=60,t.varityCold="",t.isCodeErr=!1,t.isGetPlot=!1,t.sourceId="",t.houseSetting=[{id:1,name:"已装修"},{id:0,name:"毛坯房"}],t}return Object(x["a"])(e,t),Object(C["a"])(e,[{key:"mounted",value:function(){this.sourceId=this.$route.query.sourceId,this.getCitys();String(localStorage.getItem("siteToken"));this.isLogin=!!localStorage.getItem("siteToken"),this.isLogin&&this.getUserInfo()}},{key:"cityConfirm",value:function(t,e){this.cityName=t.text,this.cityId=t.value,this.value="",this.tableList=[],this.selectData={},this.communityId="",this.communityName="",this.plotAacive=-1,this.isGetPlot=!1,this.cityShow=!1}},{key:"selectItem",value:function(t){this.active=t}},{key:"getCitys",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.axios.get(P["a"].getCitys);case 3:e=t.sent,e&&"000"===e.code?this.cityList=e.data&&e.data.map(function(t){return{text:t.cityName,value:t.id}}):this.$toast(e.msg||"获取城市失败"),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0||"Unknow Error!");case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"toPlot",value:function(){this.showPlot=!0}},{key:"getPlotList",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""!==this.value){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.next=5,this.axios.get(P["a"].getCommunityList+"/".concat(this.cityId,"/").concat(this.value));case 5:e=t.sent,e&&"000"===e.code?(this.tableList=e.data||[],this.isGetPlot=!0):this.$toast(e.msg),t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](2),new Error(t.t0||"Unknow Error!");case 12:case"end":return t.stop()}},t,this,[[2,9]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"onOk",value:function(){""===this.value?this.$toast("请输入您爱屋所在的小区"):0===y()(this.selectData).length?this.$toast("请选择您爱屋所在的小区"):(this.communityId=this.selectData.id,this.communityName=this.selectData.communityName,this.showPlot=!1)}},{key:"selectPlot",value:function(t){this.plotAacive=t.id,this.selectData=t}},{key:"plotCancel",value:function(){this.showPlot=!1}},{key:"getCode",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.axios.post(P["a"].getCode+"/".concat(this.ownerPhone));case 3:e=t.sent,e&&"000"===e.code?this.startCountdown():this.$toast("获取验证码失败"),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0||"Unknow Error!");case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"startCountdown",value:function(){var t=this;this.isDisabledVerfiyCodeBtn=!0;var e=setInterval(function(){t.time--,0===t.time&&(t.isDisabledVerfiyCodeBtn=!1,t.time=60,clearInterval(e))},1e3)}},{key:"getSubmitData",value:function(){return this.communityName?this.ownerName?void(this.isLogin?this.submitData():this.submitLogin()):(this.$toast("请输入您的姓名"),!1):(this.$toast("请选择您爱屋所在的小区"),!1)}},{key:"submitLogin",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.axios.post(P["a"].login,{mobile:this.ownerPhone,verificationCode:this.varityCold,registerSource:1});case 3:e=t.sent,this.loading=!0,e&&"000"===e.code?(L["b"].setLocalData("siteToken",e.data.access_token),L["b"].setLocalData("userId",e.data.userId),this.updateToken(e.data.access_token),this.submitData()):this.$toast(e.msg||"登录失败"),t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](0),new Error(t.t0||"Unknow Error!");case 11:return t.prev=11,this.loading=!1,t.finish(11);case 14:case"end":return t.stop()}},t,this,[[0,8,11,14]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"submitData",value:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,e={cityId:this.cityId,cityName:this.cityName,communityId:this.communityId,communityName:this.communityName,decorationStatus:this.active,ownerName:this.ownerName,ownerPhone:this.isLogin?this.userInfo&&this.userInfo.username:this.ownerPhone,ownerUserId:localStorage.getItem("userId"),source:void 0===Object(m["a"])(this.sourceId)?"":this.sourceId},t.prev=2,t.next=5,this.axios.post(P["a"].pushEntrust,e);case 5:a=t.sent,a&&"000"===a.code?this.$router.push("/house"):this.$toast(a.msg),t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](2),new Error(t.t0||"Unknow Error!");case 12:return t.prev=12,this.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,this,[[2,9,12,15]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"handlerPhone",value:function(t){t&&/^1[345789]\d{9}$/.test(t)?this.isphoneErr=!0:this.isphoneErr=!1}},{key:"handlerCode",value:function(t){t&&/^\d{6}$/.test(t)?this.isCodeErr=!0:this.isCodeErr=!1}},{key:"handlerValue",value:function(t){""!==t?this.getPlotList():(this.isCodeErr=!1,this.isGetPlot=!1,this.tableList=[],this.plotAacive=-1,this.selectData={})}}]),e}(E["a"]);A["a"]([Object(j["c"])("updateToken",{namespace:S})],D.prototype,"updateToken",void 0),A["a"]([Object(j["b"])("getUserInfo",{namespace:S})],D.prototype,"userInfo",void 0),A["a"]([Object(j["a"])("getUserInfo",{namespace:S})],D.prototype,"getUserInfo",void 0),A["a"]([Object(O["e"])("ownerPhone")],D.prototype,"handlerPhone",null),A["a"]([Object(O["e"])("varityCold")],D.prototype,"handlerCode",null),A["a"]([Object(O["e"])("value")],D.prototype,"handlerValue",null),D=A["a"]([Object(O["a"])({name:"Entrust",components:(i={},Object(o["a"])(i,p.a.name,p.a),Object(o["a"])(i,h.a.name,h.a),Object(o["a"])(i,u.a.name,u.a),Object(o["a"])(i,r.a.name,r.a),Object(o["a"])(i,"HrTitle",_["a"]),Object(o["a"])(i,"ConfirmBtn",I["a"]),i)})],D);var R=D,T=R,V=(a("317f"),a("8c9c")),U=Object(V["a"])(T,n,s,!1,null,null,null);e["default"]=U.exports},"947d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"plot-footer"},[a("van-button",{attrs:{size:"normal",type:"default"},on:{click:t.plotCancel}},[t._v(t._s(t.cancelText))]),t.isActiveKey?a("van-button",{staticClass:"plot-active",attrs:{size:"normal",type:"default",loading:t.loading,"loading-text":t.loadingText},on:{click:t.confirm}},[t._t("confirm")],2):a("van-button",{attrs:{size:"normal",type:"default",url:t.url}},[t._t("confirm")],2)],1)},n=[],s=a("a585"),o=a("26cb"),c=a("fd86"),r=a("3d0b"),l=a("d26d"),u=a("3a61"),d=a("b2e6"),h=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.isActiveKey=!1,t}return Object(l["a"])(e,t),Object(o["a"])(e,[{key:"mounted",value:function(){this.isActiveKey=this.isActive}},{key:"confirm",value:function(){}},{key:"plotCancel",value:function(){}},{key:"handlerisActive",value:function(t){this.isActiveKey=t}}]),e}(d["d"]);u["a"]([Object(d["c"])({type:Boolean,default:!1})],h.prototype,"loading",void 0),u["a"]([Object(d["c"])({type:Boolean,default:!1})],h.prototype,"isActive",void 0),u["a"]([Object(d["c"])({type:String,default:""})],h.prototype,"url",void 0),u["a"]([Object(d["c"])({type:String,default:"加载中"})],h.prototype,"loadingText",void 0),u["a"]([Object(d["c"])({type:String,default:"取消"})],h.prototype,"cancelText",void 0),u["a"]([Object(d["c"])({type:String,default:"确认"})],h.prototype,"confirmText",void 0),u["a"]([Object(d["b"])("confirm")],h.prototype,"confirm",null),u["a"]([Object(d["b"])("plotCancel")],h.prototype,"plotCancel",null),u["a"]([Object(d["e"])("isActive")],h.prototype,"handlerisActive",null),h=u["a"]([Object(d["a"])({name:"ConfirmBtn"})],h);var v=h,p=v,m=(a("1593"),a("8c9c")),f=Object(m["a"])(p,i,n,!1,null,null,null);e["a"]=f.exports},eadf:function(t,e,a){}}]);
//# sourceMappingURL=view-Entrust-vue.19ec64ba.js.map