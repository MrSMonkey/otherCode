(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-Purchase-vue"],{1419:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"no-match-page"},[t._m(0),i("p",[t._v(t._s(t.tip))]),t.url?i("div",{staticClass:"btn-box"},[i("router-link",{staticClass:"inline-btn",attrs:{to:t.url}},[t._v("\n      返回上一页\n    ")])],1):t._e()])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"img"},[s("img",{attrs:{src:i("3dfc"),alt:"404"}})])}],r=i("a585"),a=i("fd86"),c=i("3d0b"),o=i("d26d"),l=i("3a61"),u=i("b2e6"),h=i("ccfe"),d=function(t){function e(){return Object(r["a"])(this,e),Object(a["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(h["a"]);l["a"]([Object(u["c"])({type:String,default:""})],d.prototype,"url",void 0),l["a"]([Object(u["c"])({type:String,default:""})],d.prototype,"tip",void 0),d=l["a"]([Object(u["a"])({name:"NoData"})],d);var f=d,p=f,v=(i("9784"),i("8c9c")),b=Object(v["a"])(p,s,n,!1,null,null,null);e["a"]=b.exports},"2a6e":function(t,e,i){},"3cb8":function(t,e,i){},"3dfc":function(t,e,i){t.exports=i.p+"static/img/404.1cd33ae6.png"},"5cbe":function(t,e,i){"use strict";i.r(e);var s,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"purchase"},[i("van-tabs",{attrs:{sticky:!0},on:{click:t.onClick,scroll:t.tabScroll}},[i("van-tab",{attrs:{title:"服务包"}},[t.tableData.length>0?i("section",t._l(t.tableData,function(e,s){return i("div",{key:s,staticClass:"purchase-item"},[i("router-link",{attrs:{to:"/serviceInfo?serviceId="+e.serviceId+"&entrustId="+t.entrustId}},[i("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.imgUrls[0],expression:"item.imgUrls[0]",arg:"background-image"}],staticClass:"purchase-left"}),i("p",{staticClass:"purchase-title"},[t._v(t._s(e.serviceName||1))]),i("p",{staticClass:"purchase-money"},[i("span",[t._v(t._s(e.price||0))]),t._v("元")])])],1)}),0):i("section",[i("NoData",{attrs:{tip:"暂无服务产品",url:"/myHouse?entrustId="+t.entrustId}})],1)]),i("van-tab",{attrs:{title:"服务产品"}},[i("section",{staticClass:"tree"},[i("div",{staticClass:"tree-left"},t._l(t.productData,function(e,s){return i("div",{key:s,staticClass:"tree-left-item"},[i("p",{class:s===t.isActive?"cname-active cname":"cname",on:{click:function(i){return t.checkActive(s,e)}}},[t._v(t._s(e.name))]),i("transition",{attrs:{name:"uokodown"}},[s===t.isActive?i("section",{ref:"childrenItem",refInFor:!0,staticClass:"childrenItem"},t._l(e.productDetails,function(e,s){return i("div",{key:s,staticClass:"next-item",on:{click:function(i){return t.checkChildrenActive(s,e)}}},[i("div",[i("p",{class:s===t.isActiveChildrenOne?"active":""},[t._v(t._s(e.typeName))])])])}),0):t._e()])],1)}),0),i("div",{staticClass:"tree-right"},[t.productItemData.length>0?i("section",[i("p",{staticClass:"product-name"},[t._v(t._s(t.productName))]),t._l(t.productItemData,function(e,s){return i("div",{key:s,staticClass:"purchase-item"},[i("router-link",{attrs:{to:"/productInfo?productId="+e.productId+"&entrustId="+t.entrustId}},[i("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.productImgs[0],expression:"item.productImgs[0]",arg:"background-image"}],staticClass:"purchase-left"}),i("p",{staticClass:"purchase-title"},[t._v(t._s(e.productName||""))]),i("p",{staticClass:"purchase-money"},[t._v("提成"),i("span",[t._v(t._s(e.commission))])])])],1)})],2):t._e()])])])],1)],1)},r=[],a=i("5f19"),c=i("8bbb"),o=i.n(c),l=(i("3a23"),i("6c58")),u=i.n(l),h=(i("b5aa"),i("4457")),d=i("a585"),f=i("26cb"),p=i("fd86"),v=i("3d0b"),b=i("d26d"),m=i("3a61"),y=i("b2e6"),g=i("ccfe"),k=i("1419"),w=i("6a6f"),C=i("79f6"),A=function(t){function e(){var t;return Object(d["a"])(this,e),t=Object(p["a"])(this,Object(v["a"])(e).apply(this,arguments)),t.entrustId="",t.cityId="",t.tableData=[],t.productData=[],t.isActive=0,t.isActiveChildrenOne=0,t.productItemData=[],t.productName="",t}return Object(b["a"])(e,t),Object(f["a"])(e,[{key:"mounted",value:function(){this.entrustId=String(this.$route.query.entrustId),this.cityId=String(this.$route.query.cityId),this.getServiceList(this.cityId)}},{key:"getServiceList",value:function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({duration:0,mask:!0,loadingType:"spinner",message:"加载中..."}),t.prev=1,t.next=4,this.axios.get(C["a"].getServiceList+"/".concat(e));case 4:i=t.sent,i&&"000"===i.code?this.tableData=i.data||[]:this.$toast("获取服务包列表失败"),t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](1),new Error(t.t0||"Unknow Error!");case 11:return t.prev=11,this.$toast.clear(),t.finish(11);case 14:case"end":return t.stop()}},t,this,[[1,8,11,14]])}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getProductList",value:function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$toast.loading({duration:0,mask:!0,loadingType:"spinner",message:"加载中..."}),t.prev=1,t.next=4,this.axios.get(C["a"].getProductList+"/".concat(e));case 4:i=t.sent,i&&"000"===i.code?(this.productData=i.data.map(function(t){return t.productDetails.map(function(t){return 0===t.products.length&&delete t.products,t}),t}),this.isActive=0,this.isActiveChildrenOne=0,this.productItemData=i.data[0].productDetails[0].products,this.productName=i.data[0].productDetails[0].typeName):this.$toast("获取服务产品列表失败"),t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](1),new Error(t.t0||"Unknow Error!");case 11:return t.prev=11,this.$toast.clear(),t.finish(11);case 14:case"end":return t.stop()}},t,this,[[1,8,11,14]])}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getOrderStatusName",value:function(t){return w["j"][t]}},{key:"onClick",value:function(t){0===t?this.getServiceList(this.cityId):1===t&&this.getProductList(this.cityId)}},{key:"checkActive",value:function(t,e){if(t===this.isActive)return!1;this.isActive=t,this.isActiveChildrenOne=0,this.productItemData=e.productDetails[0].products,this.productName=e.productDetails[0].typeName}},{key:"checkChildrenActive",value:function(t,e){this.isActiveChildrenOne=t,this.productItemData=e.products,this.productName=e.typeName}},{key:"tabScroll",value:function(t,e){return{scrollTop:0,isFixed:!0}}}]),e}(g["a"]);A=m["a"]([Object(y["a"])({name:"Purchase",components:(s={},Object(a["a"])(s,u.a.name,u.a),Object(a["a"])(s,o.a.name,o.a),Object(a["a"])(s,"NoData",k["a"]),s)})],A);var I=A,S=I,x=(i("fa00"),i("8c9c")),_=Object(x["a"])(S,n,r,!1,null,"4527fddc",null);e["default"]=_.exports},"6c58":function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var s=i("e07b"),n=i("3598"),r=(0,s.use)("tab"),a=r[0],c=r[1],o=a({mixins:[n.FindParentMixin],props:{title:String,disabled:Boolean},data:function(){return{inited:!1}},computed:{index:function(){return this.parent.tabs.indexOf(this)},selected:function(){return this.index===this.parent.curActive}},watch:{"parent.curActive":function(){this.inited=this.inited||this.selected},title:function(){this.parent.setLine()}},created:function(){this.findParent("van-tabs")},mounted:function(){var t=this.parent.tabs,e=this.parent.slots().indexOf(this.$vnode);t.splice(-1===e?t.length:e,0,this),this.slots("title")&&this.parent.renderTitle(this.$refs.title,this.index)},beforeDestroy:function(){this.parent.tabs.splice(this.index,1)},render:function(t){var e=this.slots,i=this.inited||!this.parent.lazyRender;return t("div",{directives:[{name:"show",value:this.selected||this.parent.animated}],class:c("pane")},[i?e():t(),e("title")&&t("div",{ref:"title"},[e("title")])])}});e.default=o},"8bbb":function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var s=i("e07b"),n=i("c887"),r=i("d3eb"),a=i("0441"),c=i("6ed5"),o=(0,s.use)("tabs"),l=o[0],u=o[1],h=(0,s.use)("tab")[1],d=l({mixins:[a.TouchMixin],model:{prop:"active"},props:{color:String,sticky:Boolean,animated:Boolean,offsetTop:Number,swipeable:Boolean,background:String,titleActiveColor:String,titleInactiveColor:String,ellipsis:{type:Boolean,default:!0},lazyRender:{type:Boolean,default:!0},lineWidth:{type:Number,default:null},lineHeight:{type:Number,default:null},active:{type:[Number,String],default:0},type:{type:String,default:"line"},duration:{type:Number,default:.3},swipeThreshold:{type:Number,default:4}},data:function(){return{tabs:[],position:"",curActive:null,lineStyle:{backgroundColor:this.color},events:{resize:!1,sticky:!1,swipeable:!1}}},computed:{scrollable:function(){return this.tabs.length>this.swipeThreshold||!this.ellipsis},wrapStyle:function(){switch(this.position){case"top":return{top:this.offsetTop+"px",position:"fixed"};case"bottom":return{top:"auto",bottom:0};default:return null}},navStyle:function(){return{borderColor:this.color,background:this.background}},trackStyle:function(){if(this.animated)return{left:-1*this.curActive*100+"%",transitionDuration:this.duration+"s"}}},watch:{active:function(t){t!==this.curActive&&this.correctActive(t)},color:function(){this.setLine()},tabs:function(){this.correctActive(this.curActive||this.active),this.scrollIntoView(),this.setLine()},curActive:function(){this.scrollIntoView(),this.setLine(),"top"!==this.position&&"bottom"!==this.position||(0,c.setScrollTop)(window,(0,c.getElementTop)(this.$el))},sticky:function(){this.handlers(!0)},swipeable:function(){this.handlers(!0)}},mounted:function(){this.onShow()},activated:function(){this.onShow()},deactivated:function(){this.handlers(!1)},beforeDestroy:function(){this.handlers(!1)},methods:{onShow:function(){var t=this;this.$nextTick(function(){t.inited=!0,t.handlers(!0),t.scrollIntoView(!0)})},handlers:function(t){var e=this.events,i=this.sticky&&t,s=this.swipeable&&t;if(e.resize!==t&&(e.resize=t,(t?r.on:r.off)(window,"resize",this.setLine,!0)),e.sticky!==i&&(e.sticky=i,this.scrollEl=this.scrollEl||(0,c.getScrollEventTarget)(this.$el),(i?r.on:r.off)(this.scrollEl,"scroll",this.onScroll,!0),this.onScroll()),e.swipeable!==s){e.swipeable=s;var n=this.$refs.content,a=s?r.on:r.off;a(n,"touchstart",this.touchStart),a(n,"touchmove",this.touchMove),a(n,"touchend",this.onTouchEnd),a(n,"touchcancel",this.onTouchEnd)}},onTouchEnd:function(){var t=this.direction,e=this.deltaX,i=this.curActive,s=50;"horizontal"===t&&this.offsetX>=s&&(e>0&&0!==i?this.setCurActive(i-1):e<0&&i!==this.tabs.length-1&&this.setCurActive(i+1))},onScroll:function(){var t=(0,c.getScrollTop)(window)+this.offsetTop,e=(0,c.getElementTop)(this.$el),i=e+this.$el.offsetHeight-this.$refs.wrap.offsetHeight;this.position=t>i?"bottom":t>e?"top":"";var s={scrollTop:t,isFixed:"top"===this.position};this.$emit("scroll",s)},setLine:function(){var t=this,e=this.inited;this.$nextTick(function(){var i=t.$refs.tabs;if(i&&i[t.curActive]&&"line"===t.type){var n=i[t.curActive],r=t.lineWidth,a=t.lineHeight,c=(0,s.isDef)(r)?r:n.offsetWidth/2,o=n.offsetLeft+(n.offsetWidth-c)/2,l={width:c+"px",backgroundColor:t.color,transform:"translateX("+o+"px)"};if(e&&(l.transitionDuration=t.duration+"s"),(0,s.isDef)(a)){var u=a+"px";l.height=u,l.borderRadius=u}t.lineStyle=l}})},correctActive:function(t){t=+t;var e=this.tabs.some(function(e){return e.index===t}),i=(this.tabs[0]||{}).index||0;this.setCurActive(e?t:i)},setCurActive:function(t){t=this.findAvailableTab(t,t<this.curActive),(0,s.isDef)(t)&&t!==this.curActive&&(this.$emit("input",t),null!==this.curActive&&this.$emit("change",t,this.tabs[t].title),this.curActive=t)},findAvailableTab:function(t,e){var i=e?-1:1,s=t;while(s>=0&&s<this.tabs.length){if(!this.tabs[s].disabled)return s;s+=i}},onClick:function(t){var e=this.tabs[t],i=e.title,s=e.disabled;s?this.$emit("disabled",t,i):(this.setCurActive(t),this.$emit("click",t,i))},scrollIntoView:function(t){var e=this.$refs.tabs;if(this.scrollable&&e&&e[this.curActive]){var i=this.$refs.nav,s=i.scrollLeft,n=i.offsetWidth,r=e[this.curActive],a=r.offsetLeft,c=r.offsetWidth;this.scrollTo(i,s,a-(n-c)/2,t)}},scrollTo:function(t,e,i,s){if(s)t.scrollLeft+=i-e;else{var r=0,a=Math.round(1e3*this.duration/16),c=function s(){t.scrollLeft+=(i-e)/a,++r<a&&(0,n.raf)(s)};c()}},renderTitle:function(t,e){var i=this;this.$nextTick(function(){var s=i.$refs.title[e];s.parentNode.replaceChild(t,s)})},getTabStyle:function(t,e){var i={},s=this.color,n=e===this.curActive,r="card"===this.type;s&&(t.disabled||!r||n||(i.color=s),!t.disabled&&r&&n&&(i.backgroundColor=s),r&&(i.borderColor=s));var a=n?this.titleActiveColor:this.titleInactiveColor;return a&&(i.color=a),this.scrollable&&this.ellipsis&&(i.flexBasis=88/this.swipeThreshold+"%"),i}},render:function(t){var e=this,i=this.type,s=this.ellipsis,n=this.animated,r=this.scrollable,a=this.tabs.map(function(i,n){return t("div",{ref:"tabs",refInFor:!0,class:h({active:n===e.curActive,disabled:i.disabled,complete:!s}),style:e.getTabStyle(i,n),on:{click:function(){e.onClick(n)}}},[t("span",{ref:"title",refInFor:!0,class:{"van-ellipsis":s}},[i.title])])});return t("div",{class:u([i])},[t("div",{ref:"wrap",style:this.wrapStyle,class:[u("wrap",{scrollable:r}),{"van-hairline--top-bottom":"line"===i}]},[t("div",{ref:"nav",class:u("nav",[i]),style:this.navStyle},[this.slots("nav-left"),"line"===i&&t("div",{class:u("line"),style:this.lineStyle}),a,this.slots("nav-right")])]),t("div",{ref:"content",class:u("content",{animated:n})},[n?t("div",{class:u("track"),style:this.trackStyle},[this.slots()]):this.slots()])])}});e.default=d},9784:function(t,e,i){"use strict";var s=i("3cb8"),n=i.n(s);n.a},fa00:function(t,e,i){"use strict";var s=i("2a6e"),n=i.n(s);n.a}}]);
//# sourceMappingURL=view-Purchase-vue.14ead5ec.js.map